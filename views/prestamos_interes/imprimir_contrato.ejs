<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contrato de Préstamo - Ciwita</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #fff;
      font-size: 11px;
      line-height: 1.4;
    }

    .contract-container {
      width: 100%;
      max-width: 7.5in;
      margin: 0 auto;
      padding: 0.4in;
    }

    .title {
      font-family: 'Merriweather', serif;
      text-align: center;
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 12px;
      border-bottom: 1px solid #0f4c75;
      padding-bottom: 5px;
      color: #0f4c75;
    }

    .section {
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px dashed #ccc;
    }

    .section:last-of-type {
      border-bottom: none;
    }

    .section-heading {
      font-size: 12px;
      font-weight: 600;
      color: #0f4c75;
      margin-bottom: 5px;
      border-left: 3px solid #3282b8;
      padding-left: 6px;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 10px;
    }

    .data-table th,
    .data-table td {
      border: 1px solid #ccc;
      padding: 4px 6px;
      text-align: left;
      vertical-align: top;
    }

    .data-table thead th {
      background-color: #f0f8ff;
      font-weight: 700;
    }

    .commitment-text {
      background-color: #f2f7fc;
      border-left: 3px solid #3282b8;
      padding: 10px;
      font-size: 10px;
      border-radius: 3px;
      color: #444;
    }

    .commitment-text strong {
      color: #0f4c75;
    }

    .signature-section {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .signature-block {
      width: 45%;
      text-align: center;
      margin-top: 10px;
    }

    .signature-line {
      border-top: 1px solid #000;
      margin: 8px auto 4px auto;
      width: 80%;
    }

    .signature-label {
      font-size: 9px;
      color: #444;
    }

    @media print {
      @page {
        size: letter;
        margin: 0.4in;
      }

      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .contract-container {
        padding: 0.3in;
      }

      .title {
        font-size: 16px;
        color: #000;
        border-color: #000;
      }

      .section-heading {
        color: #000;
        border-left-color: #000;
      }

      .data-table thead th {
        background-color: #e0e0e0 !important;
        color: #000 !important;
      }

      .data-table td {
        color: #000;
      }

      .commitment-text {
        background-color: #f0f0f0 !important;
        color: #000;
        border-left-color: #000;
      }

      .signature-label {
        color: #000;
      }

      .section, .signature-section {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <div class="contract-container">
    <div class="title">Contrato de Solicitud de Préstamo</div>

    <div class="section">
      <h3 class="section-heading">Información del Cliente</h3>
      <table class="data-table">
        <tbody>
          <tr><th>Nombre</th><td><%= prestamo.cliente_nombre %> <%= prestamo.cliente_apellidos %></td></tr>
          <tr><th>Cédula</th><td><%= prestamo.cliente_cedula %></td></tr>
          <tr><th>Teléfono</th><td><%= prestamo.cliente_telefono1 %></td></tr>
          <tr><th>Dirección</th><td><%= prestamo.cliente_direccion %></td></tr>
        </tbody>
      </table>
    </div>

    <div class="section">
      <h3 class="section-heading">Datos del Préstamo</h3>
      <table class="data-table">
        <tbody>
          <tr><th>Monto Solicitado</th><td>RD$ <%= Number(prestamo.monto_solicitado).toLocaleString('es-DO', {minimumFractionDigits:2}) %></td></tr>
          <tr><th>Monto Aprobado</th><td>RD$ <%= Number(prestamo.monto_aprobado).toLocaleString('es-DO', {minimumFractionDigits:2}) %></td></tr>
          <tr><th>Cuota</th><td>RD$ <%= Number(prestamo.monto_por_cuota).toLocaleString('es-DO', {minimumFractionDigits:2}) %></td></tr>
          <tr><th>Forma de Pago</th><td><%= prestamo.forma_pago %></td></tr>
          <tr><th>Número de Cuotas</th><td><%= prestamo.cuotas %></td></tr>
          <tr><th>Fecha</th><td><%= new Date().toLocaleDateString('es-DO') %></td></tr>
        </tbody>
      </table>
    </div>

    <div class="section">
      <h3 class="section-heading">Compromiso</h3>
      <p class="commitment-text">
        Yo, <strong><%= prestamo.cliente_nombre %> <%= prestamo.cliente_apellidos %></strong>, con cédula número <%= prestamo.cliente_cedula %>, me comprometo formalmente a pagar el préstamo aprobado bajo las condiciones acordadas. En caso de incumplimiento, reconozco un recargo por mora del <strong>5% diario</strong> a partir del segundo día de atraso. Asimismo, autorizo a  Financiera Caribe Azul a tomar las acciones legales correspondientes para recuperar el monto adeudado, respondiendo con mis bienes como garantía.
      
      <br><br>
        Asimismo, reconozco que de persistir la falta de pago, me comprometo a responder con cualquier bien de mi propiedad (muebles, inmuebles, vehículos u otros) como garantía para saldar la deuda, autorizando expresamente a Financiera Caribe Azul a iniciar las acciones 
        legales y/o judiciales correspondientes para recuperar el monto adeudado.
      </p>
    </div>

    <div class="signature-section">
      <div class="signature-block">
        <div class="signature-line"></div>
        <p class="signature-label">Firma del Cliente</p>
        <p class="signature-label">Fecha: <%= new Date().toLocaleDateString('es-DO') %></p>
      </div>
      <div class="signature-block">
        <div class="signature-line"></div>
        <p class="signature-label">Firma de Ciwita Financiera</p>
        <p class="signature-label">Fecha: <%= new Date().toLocaleDateString('es-DO') %></p>
      </div>
    </div>
  </div>

  <script>
    window.onload = () => window.print();
    window.onafterprint = () => window.close();
  </script>
</body>
</html>
