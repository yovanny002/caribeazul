<%- include('../partials/header') %>
<%- include('../partials/flash') %>

<div class="container mt-4">
  <div class="card">
    <div class="card-header">
      <h3>Registrar Pago</h3>
    </div>
    <div class="card-body">
      <form action="/prestamos_interes/<%= prestamo.id %>/pago" method="POST">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label>Cliente</label>
              <p class="form-control-static">
                <%= prestamo.cliente_nombre %> <%= prestamo.cliente_apellidos %>
              </p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Saldo Capital</label>
              <p class="form-control-static">
                RD$ <%= prestamo.saldo_capital.toFixed(2) %>
              </p>
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-6">
            <div class="form-group">
              <label>Interés Acumulado</label>
              <p class="form-control-static">
                RD$ <%= prestamo.intereses_acumulados.toFixed(2) %>
              </p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Total a Pagar</label>
              <p class="form-control-static">
                RD$ <%= (prestamo.saldo_capital + prestamo.intereses_acumulados).toFixed(2) %>
              </p>
            </div>
          </div>
        </div>

        <hr>

        <div class="row mt-3">
          <div class="col-md-4">
            <div class="form-group">
              <label for="monto">Monto a Pagar (RD$)</label>
              <input type="number" step="0.01" class="form-control" id="monto" 
                     name="monto" required min="0.01"
                     max="<%= (prestamo.saldo_capital + prestamo.intereses_acumulados) %>">
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="metodo">Método de Pago</label>
              <select class="form-control" id="metodo" name="metodo" required>
                <option value="efectivo">Efectivo</option>
                <option value="transferencia">Transferencia</option>
                <option value="cheque">Cheque</option>
                <option value="tarjeta">Tarjeta</option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="referencia">Referencia</label>
              <input type="text" class="form-control" id="referencia" name="referencia">
            </div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="notas">Notas</label>
          <textarea class="form-control" id="notas" name="notas" rows="2"></textarea>
        </div>

        <div class="form-group mt-4">
          <button type="submit" class="btn btn-success">Registrar Pago</button>
          <a href="/prestamos_interes/<%= prestamo.id %>" class="btn btn-secondary">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>