<%- include('../partials/header', { title: `Contrato #${contrato.id}` }) %>

<div class="container-fluid px-4 mt-4">
  <div class="card border-0 shadow">
    <div class="card-header bg-primary text-white py-3">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="mb-0">
          <i class="fas fa-file-contract me-2"></i>Contrato #<%= contrato.id %>
        </h2>
        <div>
          <a href="/contratos" class="btn btn-light btn-sm me-2">
            <i class="fas fa-arrow-left me-1"></i> Volver
          </a>
          <a href="/contratos/<%= contrato.id %>/download" class="btn btn-success btn-sm me-2">
            <i class="fas fa-download me-1"></i> Descargar
          </a>
          <a href="/contratos/<%= contrato.id %>/print" class="btn btn-info btn-sm" target="_blank">
            <i class="fas fa-print me-1"></i> Imprimir
          </a>
        </div>
      </div>
    </div>

    <div class="card-body">
      <div class="row mb-4">
        <div class="col-md-6">
          <h5>Datos del Cliente</h5>
          <table class="table table-sm">
            <tr><td><strong>Nombre:</strong></td><td><%= contrato.datos_cliente.nombre_cliente %></td></tr>
            <tr><td><strong>Documento:</strong></td><td><%= contrato.datos_cliente.tipo_documento %>: <%= contrato.datos_cliente.numero_documento %></td></tr>
            <tr><td><strong>Dirección:</strong></td><td><%= contrato.datos_cliente.direccion %></td></tr>
            <tr><td><strong>Teléfono:</strong></td><td><%= contrato.datos_cliente.telefono %></td></tr>
          </table>
        </div>
        <div class="col-md-6">
          <h5>Vehículo</h5>
          <table class="table table-sm">
            <tr><td><strong>Marca/Modelo:</strong></td><td><%= contrato.datos_vehiculo.marca %> <%= contrato.datos_vehiculo.modelo %></td></tr>
            <tr><td><strong>Año:</strong></td><td><%= contrato.datos_vehiculo.anio %></td></tr>
            <tr><td><strong>Placa:</strong></td><td><%= contrato.datos_vehiculo.placa %></td></tr>
            <tr><td><strong>Chasis:</strong></td><td><%= contrato.datos_vehiculo.chasis %></td></tr>
          </table>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <h5>Financiamiento</h5>
          <table class="table table-sm">
            <tr><td><strong>Monto Financiado:</strong></td><td>RD$ <%= Number(contrato.datos_financiamiento.monto_financiado).toLocaleString() %></td></tr>
            <tr><td><strong>Cuotas:</strong></td><td><%= contrato.datos_financiamiento.cantidad_cuotas %></td></tr>
            <tr><td><strong>Monto por Cuota:</strong></td><td>RD$ <%= Number(contrato.datos_financiamiento.monto_cuota).toLocaleString() %></td></tr>
          </table>
        </div>
        <div class="col-md-6">
          <h5>Seguro</h5>
          <table class="table table-sm">
            <tr><td><strong>Tipo:</strong></td><td><%= contrato.datos_seguro.tipo_seguro %></td></tr>
            <tr><td><strong>Monto:</strong></td><td>RD$ <%= Number(contrato.datos_seguro.monto_seguro).toLocaleString() %></td></tr>
          </table>
        </div>
      </div>

      <h5>Contrato Generado</h5>
      <div class="border p-3 bg-light" style="max-height: 500px; overflow-y: auto;">
        <pre style="white-space: pre-wrap; font-family: inherit;"><%= contrato.contrato_texto %></pre>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>