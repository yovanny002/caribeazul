<%- include('../partials/header', { title: `Editar ${cliente.nombre} ${cliente.apellidos}` }) %>
<div class="container-fluid px-4 mt-4">
  <div class="card border-0 shadow-lg rounded-4">
    <div class="card-header bg-primary text-white py-3 rounded-top-4">
      <h2 class="mb-0"><i class="fas fa-user-edit me-2"></i> Editar Cliente</h2>
    </div>

    <div class="card-body">
      <form action="/clientes/<%= cliente.id %>?_method=PUT" method="POST" enctype="multipart/form-data" class="row g-4">
        
        <div class="col-md-6">
          <label class="form-label">Nombre *</label>
          <input name="nombre" type="text" class="form-control" value="<%= cliente.nombre %>" required>
        </div>

        <div class="col-md-6">
          <label class="form-label">Apellidos *</label>
          <input name="apellidos" type="text" class="form-control" value="<%= cliente.apellidos %>" required>
        </div>

        <div class="col-md-6">
          <label class="form-label">Apodo</label>
          <input name="apodo" type="text" class="form-control" value="<%= cliente.apodo || '' %>">
        </div>

        <div class="col-md-6">
          <label class="form-label">Foto</label>
          <% if (cliente.foto) { %>
            <div class="mb-2">
              <img src="<%= cliente.foto %>" alt="Foto actual" class="img-thumbnail rounded-circle" width="100">
            </div>
          <% } %>
          <input name="foto" type="file" accept="image/*" class="form-control">
          <input type="hidden" name="foto_actual" value="<%= cliente.foto %>">
        </div>

        <div class="col-md-6">
          <label class="form-label">Cédula *</label>
          <input name="cedula" type="text" class="form-control" value="<%= cliente.cedula %>" required>
        </div>

        <div class="col-md-6">
          <label class="form-label">Profesión</label>
          <input name="profesion" type="text" class="form-control" value="<%= cliente.profesion || '' %>">
        </div>

        <div class="col-md-6">
          <label class="form-label">Teléfono Principal</label>
          <input name="telefono1" type="text" class="form-control" value="<%= cliente.telefono1 || '' %>">
        </div>

        <div class="col-md-6">
          <label class="form-label">Teléfono Secundario</label>
          <input name="telefono2" type="text" class="form-control" value="<%= cliente.telefono2 || '' %>">
        </div>

        <div class="col-12">
          <label class="form-label">Dirección</label>
          <textarea name="direccion" class="form-control" rows="2"><%= cliente.direccion || '' %></textarea>
        </div>

        <div class="col-md-4">
          <label class="form-label">Estado *</label>
          <select name="estado" class="form-select" required>
            <option value="activo" <%= cliente.estado === 'activo' ? 'selected' : '' %>>Activo</option>
            <option value="inactivo" <%= cliente.estado === 'inactivo' ? 'selected' : '' %>>Inactivo</option>
          </select>
        </div>

        <div class="col-12 d-flex justify-content-between border-top pt-4 mt-3">
          <a href="/clientes/<%= cliente.id %>" class="btn btn-outline-secondary rounded-pill">
            <i class="fas fa-times me-2"></i>Cancelar
          </a>
          <button type="submit" class="btn btn-warning rounded-pill">
            <i class="fas fa-save me-2"></i>Actualizar Cliente
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<%- include('../partials/footer') %>
